{"version":3,"sources":["webpack:///./static/js/Meteor.js","webpack:///./static/js/Moon.js","webpack:///./static/js/Stars.js","webpack:///./src/assets/reset.css?ca23","webpack:///./src/components/ResumeEditor.vue?f570","webpack:///./src/components/StyleEditor.vue?3aaf","webpack:///./src/App.vue?35a7","webpack:///./src/Mobile.vue?9c8c","webpack:///App.vue","webpack:///Mobile.vue","webpack:///ResumeEditor.vue","webpack:///StyleEditor.vue","webpack:///./src/main.js","webpack:///./src/Mobile.vue?5ba3","webpack:///./src/components/ResumeEditor.vue?f9eb","webpack:///./src/App.vue?cbfc","webpack:///./src/components/StyleEditor.vue?2357","webpack:///./src/Mobile.vue?aa57","webpack:///./src/components/ResumeEditor.vue?263c","webpack:///./src/App.vue?20d9","webpack:///./src/components/StyleEditor.vue?5d34"],"names":["el","render","h","navigator","userAgent","match"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;AACA,C;;;;;;;;;AC9CA,yC;;;;;;;;ACCA;AACA,sBAAgG;;AAEhG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACdA;AACA,sBAAgG;;AAEhG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACdA;AACA,sBAA6F;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACdA;AACA,sBAA6F;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aADA;AAEA;AACA,gFADA;AAEA;AAFA,GAFA;AAMA,MANA,kBAMA;AACA;AACA,kBADA;AAEA,sBAFA;AAGA,uBAHA;AAIA,wDAJA;AAKA,yBALA;AAMA;AANA;AAQA,GAfA;AAgBA,SAhBA,qBAgBA;AACA;AACA,GAlBA;;AAmBA;AACA;AAAA;AAAA;AAAA;AAAA;AAA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","file":"static/js/app.b3b2750fa8d77f62946d.js","sourcesContent":["export default class Meteor {\n    constructor(ctx, x, h) {\n        this.ctx = ctx\n        this.x = x\n        this.y = 0\n        this.h = h\n        this.vx = -(4 + Math.random() * 4)\n        this.vy = -this.vx\n        this.len = Math.random() * 300 + 500\n    }\n\n    flow() {\n        //判定流星出界\n        if (this.x < -this.len || this.y > this.h + this.len) {\n            return false\n        }\n        this.x += this.vx\n        this.y += this.vy\n        return true\n    }\n\n    draw() {\n        let ctx = this.ctx,\n            //径向渐变，从流星头尾圆心，半径越大，透明度越高\n            gra = ctx.createRadialGradient(\n                this.x, this.y, 0, this.x, this.y, this.len)\n\n        const PI = Math.PI\n        gra.addColorStop(0, 'rgba(255,255,255,1)')\n        gra.addColorStop(1, 'rgba(0,0,0,0)')\n        ctx.save()\n        ctx.fillStyle = gra\n        ctx.beginPath()\n        //流星头，二分之一圆\n        ctx.arc(this.x, this.y, 1, PI / 4, 5 * PI / 4)\n        //绘制流星尾，三角形\n        ctx.lineTo(this.x + this.len, this.y - this.len)\n        ctx.closePath()\n        ctx.fill()\n        ctx.restore()\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/js/Meteor.js\n// module id = 101\n// module chunks = 1","export default class Moon {\n    constructor(ctx, width, height) {\n        this.ctx = ctx\n        this.width = width\n        this.height = height\n    }\n\n    draw() {\n        let ctx = this.ctx,\n            gradient = ctx.createRadialGradient(\n            300, 200, 80, 200, 200, 800)\n        //径向渐变\n        gradient.addColorStop(0, 'rgb(255,255,255)')\n        gradient.addColorStop(0.01, 'rgb(70,70,80)')\n        gradient.addColorStop(0.2, 'rgb(40,40,50)')\n        gradient.addColorStop(0.4, 'rgb(20,20,30)')\n        gradient.addColorStop(1, 'rgb(0,0,10)')\n        ctx.save()\n        ctx.fillStyle = gradient\n        ctx.fillRect(0, 0, this.width, this.height)\n        ctx.restore()\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/js/Moon.js\n// module id = 102\n// module chunks = 1","export default class Stars {\n    constructor(ctx, width, height, amount) {\n        this.ctx = ctx\n        this.width = width\n        this.height = height\n        this.stars = this.getStars(amount)\n    }\n\n    getStars(amount) {\n        let stars = []\n        while (amount--) {\n            stars.push({\n                x: Math.random() * this.width,\n                y: Math.random() * this.height,\n                r: Math.random() + 0.2\n            })\n        }\n        return stars\n    }\n\n    draw() {\n        let ctx = this.ctx\n        ctx.save()\n        ctx.fillStyle = 'white'\n        this.stars.forEach(star=> {\n            ctx.beginPath()\n            ctx.arc(star.x, star.y, star.r, 0, 2 * Math.PI)\n            ctx.fill()\n        })\n        ctx.restore()\n    }\n\n    //闪烁，星星半径每隔10帧随机变大或变小\n    blink() {\n        this.stars = this.stars.map(star=> {\n            let sign = Math.random() > 0.5 ? 1 : -1\n            star.r += sign * 0.2\n            if (star.r < 0) {\n                star.r = -star.r\n            } else if (star.r > 1) {\n                star.r -= 0.2\n            }\n            return star\n        })\n\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/js/Stars.js\n// module id = 103\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/reset.css\n// module id = 40\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-1f6f7918&scoped=true!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ResumeEditor.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ResumeEditor.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-1f6f7918!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ResumeEditor.vue\"),\n  /* scopeId */\n  \"data-v-1f6f7918\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ResumeEditor.vue\n// module id = 41\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-b4c4f818&scoped=true!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StyleEditor.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./StyleEditor.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-b4c4f818!../../node_modules/vue-loader/lib/selector?type=template&index=0!./StyleEditor.vue\"),\n  /* scopeId */\n  \"data-v-b4c4f818\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StyleEditor.vue\n// module id = 42\n// module chunks = 1","\n/* styles */\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../node_modules/vue-loader/lib/style-rewriter?id=data-v-3b8ea682&scoped=true!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler?id=data-v-3b8ea682!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  \"data-v-3b8ea682\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 43\n// module chunks = 1","\n/* styles */\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../node_modules/vue-loader/lib/style-rewriter?id=data-v-0d459f51&scoped=true!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Mobile.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Mobile.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler?id=data-v-0d459f51!../node_modules/vue-loader/lib/selector?type=template&index=0!./Mobile.vue\"),\n  /* scopeId */\n  \"data-v-0d459f51\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Mobile.vue\n// module id = 44\n// module chunks = 1","<template>\r\n  <div id=\"app\">\r\n    <canvas id=\"canvas\" class=\"canvas\"></canvas>\r\n    <StyleEditor ref=\"styleEditor\" :code=\"currentStyle\"></StyleEditor>\r\n    <ResumeEditor ref=\"resumeEditor\" :markdown=\"currentMarkdown\" :enableHtml=\"enableHtml\"></ResumeEditor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StyleEditor from \"./components/StyleEditor\";\r\nimport ResumeEditor from \"./components/ResumeEditor\";\r\nimport \"./assets/reset.css\";\r\nimport Stars from '../static/js/Stars';\r\nimport Moon from '../static/js/Moon';\r\nimport Meteor from '../static/js/Meteor';\r\n\r\nexport default {\r\n  name: \"app\",\r\n  components: {\r\n    StyleEditor,\r\n    ResumeEditor\r\n  },\r\n  data() {\r\n    return {\r\n      interval: 20,\r\n      currentStyle: \"\",\r\n      enableHtml: false,\r\n      fullStyle: [fullStyle_0, fullStyle_1, fullStyle_2],\r\n      currentMarkdown: \"\",\r\n      fullMarkdown: resume\r\n    };\r\n  },\r\n  created() {\r\n    this.makeResume();\r\n  },\r\n  methods: {\r\n    makeResume: async function() {\r\n      await this.progressivelyShowStyle(0);\r\n      await this.progressivelyShowResume();\r\n      await this.progressivelyShowStyle(1);\r\n      await this.showHtml();\r\n      await this.progressivelyShowStyle(2);\r\n    },\r\n    showHtml: function() {\r\n      return new Promise((resolve, reject) => {\r\n        this.enableHtml = true;\r\n        resolve();\r\n      });\r\n    },\r\n    progressivelyShowStyle(n) {\r\n      return new Promise((resolve, reject) => {\r\n        let interval = this.interval;\r\n        let showStyle = async function() {\r\n          let style = this.fullStyle[n];\r\n          if (!style) {\r\n            return;\r\n          }\r\n          // 计算前 n 个 style 的字符总数\r\n          let length = this.fullStyle\r\n            .filter((_, index) => index <= n)\r\n            .map(item => item.length)\r\n            .reduce((p, c) => p + c, 0);\r\n          let prefixLength = length - style.length;\r\n          if (this.currentStyle.length < length) {\r\n            let l = this.currentStyle.length - prefixLength;\r\n            let char = style.substring(l, l + 1) || \" \";\r\n            this.currentStyle += char;\r\n            if (style.substring(l - 1, l) === \"\\n\" && this.$refs.styleEditor) {\r\n              this.$nextTick(() => {\r\n                this.$refs.styleEditor.goBottom();\r\n              });\r\n            }\r\n            setTimeout(showStyle, interval);\r\n          } else {\r\n            resolve();\r\n          }\r\n        }.bind(this);\r\n        showStyle();\r\n      });\r\n    },\r\n    progressivelyShowResume() {\r\n      return new Promise((resolve, reject) => {\r\n        let length = this.fullMarkdown.length;\r\n        let interval = this.interval;\r\n        let showResume = () => {\r\n          if (this.currentMarkdown.length < length) {\r\n            this.currentMarkdown = this.fullMarkdown.substring(\r\n              0,\r\n              this.currentMarkdown.length + 1\r\n            );\r\n            let lastChar = this.currentMarkdown[\r\n              this.currentMarkdown.length - 1\r\n            ];\r\n            let prevChar = this.currentMarkdown[\r\n              this.currentMarkdown.length - 2\r\n            ];\r\n            if (prevChar === \"\\n\" && this.$refs.resumeEditor) {\r\n              this.$nextTick(() => this.$refs.resumeEditor.goBottom());\r\n            }\r\n            setTimeout(showResume, interval);\r\n          } else {\r\n            resolve();\r\n          }\r\n        };\r\n        showResume();\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n\t\tlet canvas = document.getElementById('canvas'),\r\n    ctx = canvas.getContext('2d'),\r\n    width = window.innerWidth,\r\n    height = window.innerHeight,\r\n    //实例化月亮和星星。流星是随机时间生成，所以只初始化数组\r\n    moon = new Moon(ctx, width, height),\r\n    stars = new Stars(ctx, width, height, 200),\r\n    meteors = [],\r\n    count = 0\r\n\r\ncanvas.width = width\r\ncanvas.height = height\r\n\r\n//流星生成函数\r\nconst meteorGenerator = ()=> {\r\n    //x位置偏移，以免经过月亮\r\n    let x = Math.random() * width + 800\r\n    meteors.push(new Meteor(ctx, x, height))\r\n\r\n    //每隔随机时间，生成新流星\r\n    setTimeout(()=> {\r\n        meteorGenerator()\r\n    }, Math.random() * 2000)\r\n}\r\n\r\n//每一帧动画生成函数\r\nconst frame = ()=> {\r\n    //每隔10帧星星闪烁一次，节省计算资源\r\n    count++\r\n    count % 10 == 0 && stars.blink()\r\n\r\n    moon.draw()\r\n    stars.draw()\r\n\r\n    meteors.forEach((meteor, index, arr)=> {\r\n        //如果流星离开视野之内，销毁流星实例，回收内存\r\n        if (meteor.flow()) {\r\n            meteor.draw()\r\n        } else {\r\n            arr.splice(index, 1)\r\n        }\r\n    })\r\n    requestAnimationFrame(frame)\r\n}\r\n\r\nmeteorGenerator()\r\nframe()\r\n\t},\r\n\r\n\r\n\r\n};\r\n\r\nlet fullStyle_0 = `\r\n\r\n\r\n/* 先设置下字体 */\r\n.styleEditor {\r\n  color: white;\r\n}\r\n/*\r\n* \r\n* 你好，我是张思傲\r\n* 下面开始演示我的简历！\r\n*/\r\n\r\n/* 首先给所有元素加上过渡效果*/\r\n* {\r\n  transition: all .3s;\r\n}\r\n\r\n/* 文字离边框太近了 */\r\n.styleEditor {\r\n   color: white;\r\n  padding: .5em;\r\n  border: 1px solid;\r\n  margin: .5em;\r\n  overflow: auto;\r\n  width: 45vw; height: 90vh;\r\n}\r\n\r\n/* 代码高亮 */\r\n.token.selector{ color: rgb(133,153,0); }\r\n.token.property{ color: rgb(187,137,0); }\r\n.token.punctuation{ color: yellow; }\r\n.token.function{ color: rgb(42,161,152); }\r\n\r\n/* 加点 3D 效果呗 */\r\nhtml{\r\n  perspective: 1000px;\r\n}\r\n.styleEditor {\r\n  position: fixed; left: 0; top: 0;\r\n  -webkit-transition: none;\r\n  transition: none;\r\n  -webkit-transform: rotateY(10deg) translateZ(-100px) ;\r\n          transform: rotateY(10deg) translateZ(-100px) ;\r\n}\r\n\r\n/* 接下来我给自己准备一个编辑器 */\r\n.resumeEditor{\r\n  position: fixed; right: 0; top: 0;\r\n  padding: .5em;  margin: .5em;\r\n  width: 48vw; height: 90vh;\r\n  border: 1px solid;\r\n  background: white; color: black;\r\n  overflow: auto;\r\n}\r\n/* 好了，我开始写简历了 */\r\n\r\n`;\r\n\r\nlet fullStyle_1 = `\r\n/* 这个简历好像差点什么\r\n * 对了，这是 Markdown 格式的，我需要变成对 HR 更友好的格式\r\n * 简单，用开源工具翻译成 HTML 就行了\r\n */\r\n`;\r\nlet fullStyle_2 = `\r\n/* 再对 HTML 加点样式 */\r\n.resumeEditor{\r\n  padding: 2em;\r\n}\r\n.resumeEditor h2{\r\n  display: inline-block;\r\n  border-bottom: 1px solid;\r\n  margin: 1em 0 .5em;\r\n}\r\n.resumeEditor ul,.resumeEditor ol{\r\n  list-style: none;\r\n}\r\n.resumeEditor ul> li::before{\r\n  content: '•';\r\n  margin-right: .5em;\r\n}\r\n.resumeEditor ol {\r\n  counter-reset: section;\r\n}\r\n.resumeEditor ol li::before {\r\n  counter-increment: section;\r\n  content: counters(section, \".\") \" \";\r\n  margin-right: .5em;\r\n}\r\n.resumeEditor blockquote {\r\n  margin: 1em;\r\n  padding: .5em;\r\n  background: #ddd;\r\n}\r\n`;\r\nlet resume = `张思傲\r\n----\r\n\r\njava后台研发工程师。\r\n\r\n* 联系方式\r\n* 手机：18092371340\r\n* Email：zhangsaio1314@126.com\r\n* QQ/微信号：229289020\r\n\r\n技能\r\n----\r\n* 后端：spring springBoot springCloud mybatis hibernate \r\n* 前端：vue angular\r\n* 其他：\r\n\r\n工作经历\r\n----\r\n1.北京安宏睿业科技有限公司\r\n\r\n友情链接\r\n----\r\n\r\n* [GitHub](https://github.com/RefinedAll)\r\n* [码云](https://gitee.com/aflsz)\r\n\r\n`;\r\n</script>\r\n\r\n<style scoped>\r\n#app {\r\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\nhtml {\r\n  min-height: 100vh;\r\n}\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n.canvas {\r\n    position: fixed;\r\n    z-index: -1;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// App.vue?7de75d36","<template>\r\n  <div id=\"app\">\r\n    <StyleEditor ref=\"styleEditor\" :code=\"currentStyle\"></StyleEditor>\r\n    <ResumeEditor ref=\"resumeEditor\" :markdown=\"currentMarkdown\" :enableHtml=\"enableHtml\"></ResumeEditor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StyleEditor from \"./components/StyleEditor\";\r\nimport ResumeEditor from \"./components/ResumeEditor\";\r\nimport \"./assets/reset.css\";\r\n\r\nexport default {\r\n  name: \"app\",\r\n  components: {\r\n    StyleEditor,\r\n    ResumeEditor\r\n  },\r\n  data() {\r\n    return {\r\n      interval: 20,\r\n      currentStyle: \"\",\r\n      enableHtml: false,\r\n      fullStyle: [\r\n        `\r\n/*\r\n* 你好，我是张思傲\r\n* 下面开始演示我的简历！\r\n*/\r\n\r\n/* 首先给所有元素加上过渡效果 */\r\n* {\r\n  transition: all .3s;\r\n}\r\n/* 白色背景太单调了，我们来点背景 */\r\nhtml {\r\n  color: rgb(222,222,222);\r\n  background: rgb(0,43,54);\r\n}\r\n/* 文字离边框太近了 */\r\n.styleEditor {\r\n  padding: .5em;\r\n  border: 1px solid;\r\n  overflow: auto;\r\n  width: 90vw;\r\n  margin: 2.5vh 5vw;\r\n  height: 90vh;\r\n}\r\n/* 太高了 */\r\n.styleEditor {\r\n  height: 45vh;\r\n}\r\n/* 代码高亮 */\r\n.token.selector{\r\n  color: rgb(133,153,0);\r\n}\r\n.token.property{\r\n  color: rgb(187,137,0);\r\n}\r\n.token.punctuation{\r\n  color: yellow;\r\n}\r\n.token.function{\r\n  color: rgb(42,161,152);\r\n}\r\n\r\n/* 加点 3D 效果呗 */\r\nhtml{\r\n  perspective: 1000px;\r\n}\r\n.styleEditor {\r\n  position: fixed; left: 0; top: 0;\r\n  transform: rotateX(-10deg) translateZ(-50px) ;\r\n}\r\n\r\n/* 接下来我给自己准备一个编辑器 */\r\n.resumeEditor{\r\n  position: fixed;\r\n  top: 50%; left: 0;\r\n  padding: .5em;  margin: 2.5vh;\r\n  width: 95vw; height: 45vh;\r\n  border: 1px solid;\r\n  background: white; color: #222;\r\n  overflow: auto;\r\n}\r\n/* 好了，我开始写简历了 */\r\n\r\n\r\n`,\r\n        `\r\n/* 这个简历好像差点什么\r\n * 对了，这是 Markdown 格式的，我需要变成对 HR 更友好的格式\r\n * 简单，用开源工具翻译成 HTML 就行了\r\n */\r\n`,\r\n        `\r\n/* 再对 HTML 加点样式 */\r\n.resumeEditor{\r\n  padding: 2em;\r\n}\r\n.resumeEditor h2{\r\n  display: inline-block;\r\n  border-bottom: 1px solid;\r\n  margin: 1em 0 .5em;\r\n}\r\n.resumeEditor ul,.resumeEditor ol{\r\n  list-style: none;\r\n}\r\n.resumeEditor ul> li::before{\r\n  content: '•';\r\n  margin-right: .5em;\r\n}\r\n.resumeEditor ol {\r\n  counter-reset: section;\r\n}\r\n.resumeEditor ol li::before {\r\n  counter-increment: section;\r\n  content: counters(section, \".\") \" \";\r\n  margin-right: .5em;\r\n}\r\n.resumeEditor blockquote {\r\n  margin: 1em;\r\n  padding: .5em;\r\n  background: #ddd;\r\n}\r\n`\r\n      ],\r\n      currentMarkdown: \"\",\r\n      fullMarkdown: `张思傲\r\n----\r\n\r\njava后台研发工程师。\r\n\r\n* 联系方式\r\n* 手机：18092371340\r\n* Email：zhangsaio1314@126.com\r\n* QQ/微信号：229289020\r\n\r\n技能\r\n----\r\n* 后端：spring springBoot springCloud mybatis hibernate \r\n* 前端：vue angular\r\n* 其他：\r\n\r\n工作经历\r\n----\r\n1.北京安宏睿业科技有限公司\r\n\r\n友情链接\r\n----\r\n\r\n* [GitHub](https://github.com/RefinedAll)\r\n* [码云](https://gitee.com/aflsz)\r\n\r\n`\r\n    };\r\n  },\r\n  created() {\r\n    this.makeResume();\r\n  },\r\n\r\n  methods: {\r\n    makeResume: async function() {\r\n      await this.progressivelyShowStyle(0);\r\n      await this.progressivelyShowResume();\r\n      await this.progressivelyShowStyle(1);\r\n      await this.showHtml();\r\n      await this.progressivelyShowStyle(2);\r\n    },\r\n    showHtml: function() {\r\n      return new Promise((resolve, reject) => {\r\n        this.enableHtml = true;\r\n        this.$nextTick(() => {\r\n          this.$refs.resumeEditor.goTop();\r\n        });\r\n        resolve();\r\n      });\r\n    },\r\n    progressivelyShowStyle(n) {\r\n      return new Promise((resolve, reject) => {\r\n        let interval = this.interval;\r\n        let showStyle = async function() {\r\n          let style = this.fullStyle[n];\r\n          if (!style) {\r\n            return;\r\n          }\r\n          // 计算前 n 个 style 的字符总数\r\n          let length = this.fullStyle\r\n            .filter((_, index) => index <= n)\r\n            .map(item => item.length)\r\n            .reduce((p, c) => p + c, 0);\r\n          let prefixLength = length - style.length;\r\n          if (this.currentStyle.length < length) {\r\n            let l = this.currentStyle.length - prefixLength;\r\n            let char = style.substring(l, l + 1) || \" \";\r\n            this.currentStyle += char;\r\n            if (style.substring(l - 1, l) === \"\\n\" && this.$refs.styleEditor) {\r\n              this.$nextTick(() => {\r\n                this.$refs.styleEditor.goBottom();\r\n              });\r\n            }\r\n            setTimeout(showStyle, interval);\r\n          } else {\r\n            resolve();\r\n          }\r\n        }.bind(this);\r\n        showStyle();\r\n      });\r\n    },\r\n    progressivelyShowResume() {\r\n      return new Promise((resolve, reject) => {\r\n        let length = this.fullMarkdown.length;\r\n        let interval = this.interval;\r\n        let showResume = () => {\r\n          if (this.currentMarkdown.length < length) {\r\n            this.currentMarkdown = this.fullMarkdown.substring(\r\n              0,\r\n              this.currentMarkdown.length + 1\r\n            );\r\n            let lastChar = this.currentMarkdown[\r\n              this.currentMarkdown.length - 1\r\n            ];\r\n            let prevChar = this.currentMarkdown[\r\n              this.currentMarkdown.length - 2\r\n            ];\r\n            if (prevChar === \"\\n\" && this.$refs.resumeEditor) {\r\n              this.$nextTick(() => this.$refs.resumeEditor.goBottom());\r\n            }\r\n            setTimeout(showResume, interval);\r\n          } else {\r\n            resolve();\r\n          }\r\n        };\r\n        showResume();\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#app {\r\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  min-height: 100vh;\r\n  position: relative;\r\n}\r\n\r\nhtml {\r\n  min-height: 100vh;\r\n}\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// Mobile.vue?3621723b","<template>\r\n  <div class=\"resumeEditor\" :class=\"{htmlMode:enableHtml}\" ref=\"container\">\r\n    <div v-if=\"enableHtml\" v-html=\"result\"></div>\r\n    <pre v-else>{{result}}</pre>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import marked from 'marked'\r\n  export default {\r\n    props: ['markdown', 'enableHtml'],\r\n    name: 'ResumeEditor',\r\n    computed: {\r\n      result: function () {\r\n        return this.enableHtml ? marked(this.markdown) : this.markdown\r\n      }\r\n    },\r\n    methods: {\r\n      goBottom: function () {\r\n        this.$refs.container.scrollTop = 100000\r\n      },\r\n      goTop: function(){\r\n        this.$refs.container.scrollTop = 0\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  @media (max-width:500px){\r\n    .resumeEditor{\r\n    }\r\n  }\r\n  .htmlMode {\r\n    animation: flip 2s;\r\n  }\r\n\r\n  @keyframes flip {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// ResumeEditor.vue?9b9efe4a","<template>\r\n  <div class=\"styleEditor\" ref=\"container\">\r\n    <div class=\"code\" v-html=\"codeInStyleTag\"></div>\r\n    <pre class=\"\" v-html=\"highlightedCode\"></pre>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Prism from 'prismjs'\r\n  export default {\r\n    name: 'Editor',\r\n    props: ['code'],\r\n    computed: {\r\n      highlightedCode: function () {\r\n        return Prism.highlight(this.code, Prism.languages.css)\r\n      },\r\n      codeInStyleTag: function () {\r\n        return `<style>${this.code}</style>`\r\n      }\r\n    },\r\n    methods: {\r\n      goBottom() {\r\n        this.$refs.container.scrollTop = 100000\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  pre{\r\n  }\r\n  @media (max-width:500px){\r\n    pre{\r\n    }\r\n  }\r\n  .code {\r\n    display: none;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// StyleEditor.vue?01188106","import Vue from 'vue'\r\nimport App from './App'\r\nimport Mobile from './Mobile'\r\n\r\n//var width = document.documentElement.clientWidth\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  /*根据宽度判断 */\r\n  //render: h => h(width > 500 ? App : Mobile)\r\n  render: h => h((navigator.userAgent\r\n    .match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)) ?\r\n    Mobile : App)\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-0d459f51&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Mobile.vue\n// module id = 85\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-1f6f7918&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/ResumeEditor.vue\n// module id = 86\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-3b8ea682&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/App.vue\n// module id = 87\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-b4c4f818&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/StyleEditor.vue\n// module id = 88\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('StyleEditor', {\n    ref: \"styleEditor\",\n    attrs: {\n      \"code\": _vm.currentStyle\n    }\n  }), _vm._v(\" \"), _c('ResumeEditor', {\n    ref: \"resumeEditor\",\n    attrs: {\n      \"markdown\": _vm.currentMarkdown,\n      \"enableHtml\": _vm.enableHtml\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-0d459f51!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Mobile.vue\n// module id = 96\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"container\",\n    staticClass: \"resumeEditor\",\n    class: {\n      htmlMode: _vm.enableHtml\n    }\n  }, [(_vm.enableHtml) ? _c('div', {\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.result)\n    }\n  }) : _c('pre', [_vm._v(_vm._s(_vm.result))])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1f6f7918!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ResumeEditor.vue\n// module id = 97\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('canvas', {\n    staticClass: \"canvas\",\n    attrs: {\n      \"id\": \"canvas\"\n    }\n  }), _vm._v(\" \"), _c('StyleEditor', {\n    ref: \"styleEditor\",\n    attrs: {\n      \"code\": _vm.currentStyle\n    }\n  }), _vm._v(\" \"), _c('ResumeEditor', {\n    ref: \"resumeEditor\",\n    attrs: {\n      \"markdown\": _vm.currentMarkdown,\n      \"enableHtml\": _vm.enableHtml\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-3b8ea682!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 98\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"container\",\n    staticClass: \"styleEditor\"\n  }, [_c('div', {\n    staticClass: \"code\",\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.codeInStyleTag)\n    }\n  }), _vm._v(\" \"), _c('pre', {\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.highlightedCode)\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-b4c4f818!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/StyleEditor.vue\n// module id = 99\n// module chunks = 1"],"sourceRoot":""}